<section class="contact-us-section">
  <div class="container-fluid">
    <!-- Page Header -->
    <app-page-header
      [title]="'تواصل معنا'"
      [breadcrumbs]="[{ label: 'اتصل بنا', url: '/contact' }]"
    >
    </app-page-header>

    <!-- Loading State -->
    @if (isLoading()) {
    <div class="loading-container">
      <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
      <p>جاري التحميل...</p>
    </div>
    }

    <!-- Error State -->
    @if (error()) {
    <div class="error-container">
      <i
        class="pi pi-exclamation-triangle"
        style="font-size: 2rem; color: #e74c3c"
      ></i>
      <p>{{ error() }}</p>
    </div>
    }

    <!-- Content -->
    @if (!isLoading() && !error() && contactInfo()) {
    <!-- Contact Content -->
    <div class="contact-content">
      <!-- Contact Information -->
      <div class="contact-info-section">
        <div class="info-card">
          <div class="card-header">
            <div class="header-icon">
              <i class="pi pi-map-marker"></i>
            </div>
            <h3 class="section-title2">معلومات التواصل</h3>
            <p class="section-subtitle">تواصلوا معنا عبر أي من هذه القنوات</p>
          </div>

          <div class="contact-details">
            <!-- Address -->
            @if (contactInfo()?.address) {
            <div class="contact-item">
              <div class="item-icon">
                <i class="pi pi-map-marker"></i>
              </div>
              <div class="item-content">
                <h4 class="item-title">العنوان</h4>
                <p class="item-text" dir="rtl">{{ contactInfo()?.address }}</p>
                <button
                  class="copy-btn"
                  (click)="copyToClipboard(contactInfo()?.address ?? '')"
                  title="نسخ العنوان"
                >
                  <i class="pi pi-copy"></i>
                </button>
              </div>
            </div>
            }

            <!-- Email -->
            @if (contactInfo()?.email) {
            <div class="contact-item">
              <div class="item-icon">
                <i class="pi pi-envelope"></i>
              </div>
              <div class="item-content">
                <h4 class="item-title">البريد الإلكتروني</h4>
                <a
                  [href]="'mailto:' + contactInfo()?.email"
                  class="item-link"
                  >{{ contactInfo()?.email }}</a
                >
                <button
                  class="copy-btn"
                  (click)="copyToClipboard(contactInfo()?.email ?? '')"
                  title="نسخ البريد الإلكتروني"
                >
                  <i class="pi pi-copy"></i>
                </button>
              </div>
            </div>
            }

            <!-- Phone -->
            @if (contactInfo()?.phone) {
            <div class="contact-item">
              <div class="item-icon">
                <i class="pi pi-phone"></i>
              </div>
              <div class="item-content">
                <h4 class="item-title">رقم الهاتف</h4>
                <a [href]="'tel:' + contactInfo()?.phone" class="item-link">{{
                  contactInfo()?.phone
                }}</a>
                <button
                  class="copy-btn"
                  (click)="copyToClipboard(contactInfo()?.phone ?? '')"
                  title="نسخ رقم الهاتف"
                >
                  <i class="pi pi-copy"></i>
                </button>
              </div>
            </div>
            }
          </div>

          <!-- Social Media -->
          @if (socialMediaLinks().length > 0) {
          <div class="social-media-section">
            <h4 class="social-title">تابعنا</h4>
            <div class="social-links">
              @for (social of socialMediaLinks(); track social.platform) {
              <a
                [href]="social.url"
                target="_blank"
                class="social-link"
                [title]="social.platform"
              >
                <i [class]="social.icon"></i>
                <span>{{ social.platform }}</span>
              </a>
              }
            </div>
          </div>
          }
        </div>
      </div>

      <!-- Contact Form -->
      <div class="contact-form-section">
        <div class="form-card">
          <div class="form-header">
            <div class="header-icon">
              <i class="pi pi-send"></i>
            </div>
            <h3 class="section-title2">أرسل رسالة</h3>
            <p class="section-subtitle">
              يسعدنا تواصلكم معنا. أرسلوا رسالتكم وسنرد في أقرب وقت ممكن.
            </p>
          </div>

          <!-- Success Message -->
          @if (submitSuccess) {
          <div class="success-message">
            <div class="success-icon">
              <i class="pi pi-check-circle"></i>
            </div>
            <h4>تم إرسال الرسالة بنجاح!</h4>
            <p>شكرًا لتواصلكم معنا. سنرد عليكم قريبًا.</p>
          </div>
          }

          <!-- Contact Form -->
          @if (!submitSuccess) {
          <form class="contact-form" (ngSubmit)="onSubmit()">
            <div class="form-row">
              <div class="form-group">
                <label for="name" class="form-label">
                  <i class="pi pi-user"></i>
                  الاسم الكامل
                </label>
                <input
                  type="text"
                  id="name"
                  class="form-input"
                  [(ngModel)]="contactForm.name"
                  name="name"
                  placeholder="أدخل اسمك الكامل"
                  required
                />
              </div>

              <div class="form-group">
                <label for="email" class="form-label">
                  <i class="pi pi-envelope"></i>
                  البريد الإلكتروني
                </label>
                <input
                  type="email"
                  id="email"
                  class="form-input"
                  [(ngModel)]="contactForm.email"
                  name="email"
                  placeholder="أدخل بريدك الإلكتروني"
                  required
                />
              </div>
            </div>

            <div class="form-group">
              <label for="subject" class="form-label">
                <i class="pi pi-tag"></i>
                الموضوع
              </label>
              <input
                type="text"
                id="subject"
                class="form-input"
                [(ngModel)]="contactForm.subject"
                name="subject"
                placeholder="أدخل موضوع الرسالة"
                required
              />
            </div>

            <div class="form-group">
              <label for="message" class="form-label">
                <i class="pi pi-comment"></i>
                الرسالة
              </label>
              <textarea
                id="message"
                class="form-textarea"
                [(ngModel)]="contactForm.message"
                name="message"
                placeholder="أدخل رسالتك هنا..."
                rows="6"
                required
              ></textarea>
            </div>

            <button
              type="submit"
              class="submit-btn"
              [disabled]="!isValidForm() || isSubmitting"
            >
              @if (!isSubmitting) {
              <span>
                <i class="pi pi-send"></i>
                إرسال الرسالة
              </span>
              } @if (isSubmitting) {
              <span>
                <i class="pi pi-spin pi-spinner"></i>
                جارٍ الإرسال...
              </span>
              }
              <div class="btn-glow"></div>
            </button>
          </form>
          }
        </div>
      </div>
    </div>

    <!-- Map Section -->
    @if (mapUrl()) {
    <div class="map-section">
      <div class="map-header">
        <h3 class="section-title">موقعنا على الخريطة</h3>
        <p class="section-subtitle">يمكنكم زيارتنا في الموقع التالي</p>
      </div>
      <div class="map-container">
        <iframe
          [src]="mapUrl()"
          width="100%"
          height="450"
          style="border: 0; border-radius: 24px"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        >
        </iframe>
      </div>
      <div class="map-link">
        <a
          [href]="contactInfo()?.mapLocation"
          target="_blank"
          class="view-map-btn"
        >
          <i class="pi pi-map-marker"></i>
          <span>فتح في خرائط جوجل</span>
          <i class="pi pi-external-link"></i>
        </a>
      </div>
    </div>
    } }
  </div>
</section>

<!--  -->
