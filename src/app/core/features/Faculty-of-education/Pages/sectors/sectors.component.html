<!-- Loading State -->
@if (loading()) {
<div class="sectors-container">
  <div class="container-fluid">
    <div class="loading-container text-center py-5">
      <i
        class="pi pi-spin pi-spinner"
        style="font-size: 2rem; color: var(--primary-color)"
      ></i>
      <p class="mt-3">جاري تحميل البيانات...</p>
    </div>
  </div>
</div>
}

<!-- Sectors Page -->
@if (!loading() && currentSector()) {
<div class="sectors-container">
  <div class="container-fluid">
    <div class="row">
      <!-- Main Content -->
      <div class="col-lg-8 col-md-7">
        <app-page-header
          [title]="getSectorTitle(currentSector())"
          [breadcrumbs]="[{ label: 'الإدارة العليا' }]"
        >
        </app-page-header>

        <div class="sector-content">
          <!-- Sector Header -->
          <div class="sector-header mb-5">
            <div class="vice-dean-info">
              <div class="vice-dean-card">
                <div class="vice-dean-avatar">
                  <i class="pi pi-user"></i>
                </div>
                <div class="vice-dean-details">
                  <h3 class="vice-dean-title">وكيل القطاع</h3>
                  <p class="vice-dean-name">
                    {{ getSectorViceDean(currentSector()) }}
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- About Section -->
          @if (getAbout(currentSector())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-info-circle"></i>
              </div>
              <h2 class="section-subtitle">عن القطاع</h2>
            </div>
            <div
              class="about-content"
              [innerHTML]="getAbout(currentSector())"
            ></div>
          </div>
          }

          <!-- Vision Section -->
          @if (getVision(currentSector())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-eye"></i>
              </div>
              <h2 class="section-subtitle">الرؤية</h2>
            </div>
            <div
              class="vision-content"
              [innerHTML]="getVision(currentSector())"
            ></div>
          </div>
          }

          <!-- Mission Section -->
          @if (getMission(currentSector())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-flag"></i>
              </div>
              <h2 class="section-subtitle">الرسالة</h2>
            </div>
            <div
              class="mission-content"
              [innerHTML]="getMission(currentSector())"
            ></div>
          </div>
          }

          <!-- Goals Section -->
          @if (getSectorGoals(currentSector()).length > 0) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-target"></i>
              </div>
              <h2 class="section-subtitle">أهداف القطاع</h2>
            </div>
            <div class="objectives-list">
              @for (goal of getSectorGoals(currentSector()); track goal; let i =
              $index) {
              <div class="objective-item">
                <div class="objective-number">{{ i + 1 }}</div>
                <div class="objective-content">
                  <p>{{ goal }}</p>
                </div>
              </div>
              }
            </div>
          </div>
          }

          <!-- Navigation Buttons -->
          <div class="sector-navigation">
            @if (navigation().previous) {
            <button
              class="nav-btn prev-btn"
              (click)="navigateToPrevious()"
              [title]="getSectorTitle(navigation().previous)"
            >
              <i class="pi pi-chevron-right me-2"></i>
              <div class="nav-content">
                <span class="nav-label">السابق</span>
                <span class="nav-title">{{
                  getSectorTitle(navigation().previous)
                }}</span>
              </div>
            </button>
            } @if (navigation().next) {
            <button
              class="nav-btn next-btn"
              (click)="navigateToNext()"
              [title]="getSectorTitle(navigation().next)"
            >
              <div class="nav-content">
                <span class="nav-label">التالي</span>
                <span class="nav-title">{{
                  getSectorTitle(navigation().next)
                }}</span>
              </div>
              <i class="pi pi-chevron-left ms-2"></i>
            </button>
            }
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4 col-md-5">
        <div class="sidebar">
          <div class="sidebar-section">
            <h3 class="sidebar-title">جميع القطاعات</h3>

            <div class="sectors-list">
              @for (sector of allSectors(); track sector.id) {
              <div
                class="sector-item"
                [class.active]="isCurrentSector(sector)"
                (click)="navigateToSector(sector)"
              >
                <div class="sector-icon">
                  <i class="pi pi-building"></i>
                </div>
                <div class="sector-info">
                  <h4 class="sector-name">{{ getSectorTitle(sector) }}</h4>
                  <p class="sector-dean">{{ getSectorViceDean(sector) }}</p>
                </div>
                <div class="sector-arrow">
                  <i class="pi pi-chevron-left"></i>
                </div>
              </div>
              }
            </div>
          </div>

          <!-- Quick Contact -->
          <div class="sidebar-section">
            <h3 class="sidebar-title">تواصل سريع</h3>
            <div class="contact-info">
              <div class="contact-item">
                <i class="pi pi-phone"></i>
                <span>01010577677</span>
              </div>
              <div class="contact-item">
                <i class="pi pi-envelope"></i>
                <span>waleed2507&#64;yahoo.co.uk</span>
              </div>
              <div class="contact-item">
                <i class="pi pi-map-marker"></i>
                <span>مدينة طيبة الجديدة، الأقصر</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
}
