<!-- Loading State -->
@if (isLoading()) {
<div class="programs-container col-lg-12">
  <div class="loading-container text-center py-5">
    <i
      class="pi pi-spin pi-spinner"
      style="font-size: 2rem; color: var(--primary-color)"
    ></i>
    <p class="mt-3">جاري تحميل البرامج...</p>
  </div>
</div>
}

<!-- Programs Content -->
@if (!isLoading()) {
<div class="programs-container col-lg-12">
  <div class="content-wrapper col-lg-12">
    <div class="main-content col-lg-12">
      <app-page-header
        [title]="'البرامج الأكاديمية'"
        [breadcrumbs]="[{ label: 'البرامج الأكاديمية' }]"
      >
      </app-page-header>

      <div class="programs-grid">
        @for (program of filteredPrograms(); track program.id) {
        <p-card class="program-card" [styleClass]="'custom-card'">
          <ng-template pTemplate="header">
            <div class="card-image-wrapper">
              <img
                [src]="getProgramImage(program)"
                [alt]="getProgramTitle(program)"
                class="card-image"
              />
            </div>
          </ng-template>

          <div class="card-content">
            <h3 class="program-title">
              {{ getProgramTitle(program) }}
            </h3>

            <p-divider></p-divider>

            <p class="program-description">
              {{ getProgramDescription(program) }}
            </p>
          </div>

          <ng-template pTemplate="footer">
            <div class="card-footer">
              <button
                class="view-details-btn"
                [routerLink]="['/programs', program.id]"
              >
                <span>عرض التفاصيل</span>
                <i class="pi pi-arrow-left"></i>
              </button>
            </div>
          </ng-template>
        </p-card>
        }
      </div>

      @if (filteredPrograms().length === 0) {
      <div class="no-results">
        <i class="pi pi-search"></i>
        <h3>لا توجد نتائج</h3>
        <p>لا توجد برامج تطابق بحثك</p>
      </div>
      }
    </div>

    <aside class="sidebar">
      <div class="sidebar-card">
        <h3 class="sidebar-title">
          <i class="pi pi-list"></i>
          جميع البرامج
        </h3>
        <p-divider></p-divider>
        <ul class="programs-list">
          @for (program of programs(); track program.id) {
          <li
            class="program-item"
            [class.active]="selectedProgram()?.id === program.id"
          >
            <a
              [routerLink]="['/programs', program.id]"
              (click)="selectProgram(program)"
            >
              <i class="pi pi-angle-left"></i>
              <span>{{ getProgramTitle(program) }}</span>
            </a>
          </li>
          }
        </ul>
      </div>
    </aside>
  </div>
</div>
}
