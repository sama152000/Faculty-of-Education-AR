<!-- Loading State -->
@if (loading()) {
<div class="program-details-container">
  <div class="loading-container text-center py-5">
    <i
      class="pi pi-spin pi-spinner"
      style="font-size: 2rem; color: var(--primary-color)"
    ></i>
    <p class="mt-3">جاري تحميل البرنامج...</p>
  </div>
</div>
}

<!-- Program Details -->
@if (!loading() && currentProgram()) {
<div class="program-details-container col-md-12">
  <div class="content-wrapper col-md-12">
    <div class="main-content col-md-12">
      <app-page-header
        [title]="getProgramTitle(currentProgram())"
        [breadcrumbs]="[
          { label: 'البرامج الأكاديمية' },
          { label: getProgramTitle(currentProgram()) }
        ]"
      >
      </app-page-header>

      <!-- Image Section -->
      @if (getProgramImage(currentProgram())) {
      <div class="image-section">
        <div class="program-image-wrapper">
          <img
            [src]="getProgramImage(currentProgram())"
            [alt]="getProgramTitle(currentProgram())"
            class="program-main-image"
          />
          <div class="image-overlay"></div>
        </div>
      </div>
      }

      <p-card class="details-card">
        <div class="program-header">
          <div class="title-section">
            <h1 class="program-title">
              {{ getProgramTitle(currentProgram()) }}
            </h1>
          </div>
        </div>

        <p-divider></p-divider>

        <!-- About Section -->
        @if (getProgramAbout(currentProgram())) {
        <div class="description-section">
          <h3 class="section-heading">
            <i class="pi pi-info-circle"></i>
            عن البرنامج
          </h3>
          <div
            class="about-content"
            [innerHTML]="getProgramAbout(currentProgram())"
          ></div>
        </div>
        }

        <!-- Vision Section -->
        @if (getProgramVision(currentProgram())) {
        <div class="description-section">
          <h3 class="section-heading">
            <i class="pi pi-eye"></i>
            الرؤية
          </h3>
          <div
            class="vision-content"
            [innerHTML]="getProgramVision(currentProgram())"
          ></div>
        </div>
        }

        <!-- Mission Section -->
        @if (getProgramMission(currentProgram())) {
        <div class="description-section">
          <h3 class="section-heading">
            <i class="pi pi-flag"></i>
            الرسالة
          </h3>
          <div
            class="mission-content"
            [innerHTML]="getProgramMission(currentProgram())"
          ></div>
        </div>
        }

        <!-- Goals Section -->
        @if (getProgramGoals(currentProgram()).length > 0) {
        <div class="description-section">
          <h3 class="section-heading">
            <i class="pi pi-target"></i>
            أهداف البرنامج
          </h3>
          <div class="objectives-list">
            @for (goal of getProgramGoals(currentProgram()); track goal; let i =
            $index) {
            <div class="objective-item">
              <div class="objective-number">{{ i + 1 }}</div>
              <div class="objective-content">
                <p>{{ goal }}</p>
              </div>
            </div>
            }
          </div>
        </div>
        }

        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
          @if (navigation().next) {
          <p-button
            icon="pi pi-arrow-left"
            label="البرنامج التالي"
            iconPos="right"
            (onClick)="goToNextProgram()"
            styleClass="p-button-primary"
            [style]="{ flex: '1' }"
          >
          </p-button>
          } @if (navigation().previous) {
          <p-button
            label="البرنامج السابق"
            (onClick)="goToPreviousProgram()"
            icon="pi pi-arrow-right"
            styleClass="p-button-outlined"
            [style]="{ flex: '1' }"
          >
          </p-button>
          }
        </div>
      </p-card>
    </div>

    <aside class="sidebar">
      <div class="sidebar-card">
        <h3 class="sidebar-title">
          <i class="pi pi-list"></i>
          جميع البرامج
        </h3>
        <p-divider></p-divider>
        <ul class="programs-navigation-list">
          @for (prog of allPrograms(); track prog.id) {
          <li class="program-nav-item" [class.active]="isCurrentProgram(prog)">
            <a
              [routerLink]="['/programs', prog.id]"
              (click)="navigateToProgram(prog)"
            >
              <i class="pi pi-angle-left"></i>
              <span>{{ getProgramTitle(prog) }}</span>
            </a>
          </li>
          }
        </ul>
      </div>
    </aside>
  </div>
</div>
}
