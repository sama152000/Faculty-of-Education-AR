<!-- Loading State -->
@if (loading()) {
<div class="management-page">
  <div class="container-fluid">
    <div class="loading-container text-center py-5">
      <i
        class="pi pi-spin pi-spinner"
        style="font-size: 2rem; color: var(--primary-color)"
      ></i>
      <p class="mt-3">جاري تحميل البيانات...</p>
    </div>
  </div>
</div>
}

<!-- Management Page -->
@if (!loading() && currentManagement()) {
<div class="management-page">
  <div class="container-fluid">
    <div class="row">
      <!-- Main Content -->
      <div class="col-lg-8 col-md-7">
        <div class="management-content">
          <app-page-header
            [title]="getManagementTitle(currentManagement())"
            [breadcrumbs]="[
              { label: 'الإدارات' },
              { label: getManagementTitle(currentManagement()) }
            ]"
          ></app-page-header>

          <!-- Management Header -->
          <div class="management-header mb-5">
            @if (getManagementImage(currentManagement())) {
            <div class="management-image">
              <img
                [src]="getManagementImage(currentManagement())"
                [alt]="getManagementTitle(currentManagement())"
              />
            </div>
            }
          </div>

          <!-- Content Section -->
          @if (getManagementContent(currentManagement())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-info-circle"></i>
              </div>
              <h2 class="section-subtitle">عن الإدارة</h2>
            </div>
            <div
              class="about-content"
              [innerHTML]="getManagementContent(currentManagement())"
            ></div>
          </div>
          }

          <!-- History Section -->
          @if (getHistory(currentManagement())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-history"></i>
              </div>
              <h2 class="section-subtitle">تاريخ الإدارة</h2>
            </div>
            <div
              class="history-content"
              [innerHTML]="getHistory(currentManagement())"
            ></div>
          </div>
          }

          <!-- Vision Section -->
          @if (getVision(currentManagement())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-eye"></i>
              </div>
              <h2 class="section-subtitle">الرؤية</h2>
            </div>
            <div
              class="vision-content"
              [innerHTML]="getVision(currentManagement())"
            ></div>
          </div>
          }

          <!-- Mission Section -->
          @if (getMission(currentManagement())) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-flag"></i>
              </div>
              <h2 class="section-subtitle">الرسالة</h2>
            </div>
            <div
              class="mission-content"
              [innerHTML]="getMission(currentManagement())"
            ></div>
          </div>
          }

          <!-- Goals Section -->
          @if (getManagementGoals(currentManagement()).length > 0) {
          <div class="content-section mb-5">
            <div class="section-header">
              <div class="section-icon">
                <i class="pi pi-target"></i>
              </div>
              <h2 class="section-subtitle">أهداف الإدارة</h2>
            </div>
            <div class="objectives-list">
              @for (goal of getManagementGoals(currentManagement()); track goal;
              let i = $index) {
              <div class="objective-item">
                <div class="objective-number">{{ i + 1 }}</div>
                <div class="objective-content">
                  <p>{{ goal }}</p>
                </div>
              </div>
              }
            </div>
          </div>
          }

          <!-- Navigation Buttons -->
          <div class="management-navigation">
            @if (navigation().previous) {
            <button
              class="nav-btn prev-btn"
              (click)="navigateToPrevious()"
              [title]="getManagementTitle(navigation().previous)"
            >
              <i class="pi pi-chevron-right me-2"></i>
              <div class="nav-content">
                <span class="nav-label">السابق</span>
                <span class="nav-title">{{
                  getManagementTitle(navigation().previous)
                }}</span>
              </div>
            </button>
            } @if (navigation().next) {
            <button
              class="nav-btn next-btn"
              (click)="navigateToNext()"
              [title]="getManagementTitle(navigation().next)"
            >
              <div class="nav-content">
                <span class="nav-label">التالي</span>
                <span class="nav-title">{{
                  getManagementTitle(navigation().next)
                }}</span>
              </div>
              <i class="pi pi-chevron-left ms-2"></i>
            </button>
            }
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="col-lg-4 col-md-5">
        <div class="sidebar">
          <div class="sidebar-section">
            <h3 class="sidebar-title">جميع الإدارات</h3>

            <div class="managements-list">
              @for (management of allManagements(); track management.id; let i =
              $index) {
              <div
                class="management-item"
                [class.active]="isCurrentManagement(management)"
                (click)="navigateToManagement(management)"
              >
                <div class="management-icon">
                  <i [class]="getManagementIcon(i)"></i>
                </div>
                <div class="management-info">
                  <h4 class="management-name">
                    {{ getManagementTitle(management) }}
                  </h4>
                </div>
                <div class="management-arrow">
                  <i class="pi pi-chevron-left"></i>
                </div>
              </div>
              }
            </div>
          </div>

          <!-- Quick Contact -->
          <div class="sidebar-section">
            <h3 class="sidebar-title">تواصل سريع</h3>
            <div class="contact-info">
              <div class="contact-item">
                <i class="pi pi-phone"></i>
                <span>01010577677</span>
              </div>
              <div class="contact-item">
                <i class="pi pi-envelope"></i>
                <span>waleed2507&#64;yahoo.co.uk</span>
              </div>
              <div class="contact-item">
                <i class="pi pi-map-marker"></i>
                <span>مدينة طيبة الجديدة، الأقصر</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
}
